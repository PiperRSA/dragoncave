[agent]
  hostname = "dragoncave"
  interval = "60s"
  flush_interval = "60s"

[[outputs.influxdb_v2]]
  urls = ["http://influxdb:8086"]
  token = "${INFLUX_TOKEN}"
  organization = "dragoncave"
  bucket = "telemetry"

# Container-level metrics
[[inputs.cpu]]
  percpu = false
  totalcpu = true

[[inputs.mem]]

[[inputs.net]]

# Exporter metrics
[[inputs.prometheus]]
  ## Container metrics sourced from cadvisor on the core network.
  urls = ["http://cadvisor:8080/metrics"]
  name_override = "cadvisor"

[[inputs.prometheus]]
  ## Host metrics via node-exporter (update URL if the Pi address changes).
  urls = ["http://${PI_HOST_IP}:9100/metrics"]
  name_override = "node_exporter"

[[inputs.prometheus]]
  ## SMART metrics (enable when smart-exporter profile is active).
  urls = ["http://smart-exporter:9633/metrics"]
  name_override = "smartctl"
